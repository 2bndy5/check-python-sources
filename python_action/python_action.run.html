
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>python_action.run &#8212; check-python-sources Github Action</title>
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="canonical" href="https://check-python-sources.readthedocs.io/python_action/python_action.run.html" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="python_action.parse_pylint" href="python_action.parse_pylint.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="python_action.parse_pylint.html" title="python_action.parse_pylint"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">check-python-sources Github Action</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="python_action.html" accesskey="U">python_action</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">python_action.run</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1 id="module-python_action.run"><span id="python-action-run"></span>python_action.run<a class="headerlink" href="#module-python_action.run" title="Permalink to this headline">¶</a></h1>
<p>Run clang-tidy and clang-format on a list of changed files provided by GitHub’s
REST API. If executed from command-line, then [<a class="reference internal" href="#python_action.run.main" title="python_action.run.main"><code class="xref any py py-func docutils literal notranslate"><span class="pre">main()</span></code></a>][python_action.run.main] is
the entrypoint.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.github.com/en/rest/reference/pulls">github rest API reference for pulls</a></p></li>
<li><p><a class="reference external" href="https://docs.github.com/en/rest/reference/repos">github rest API reference for repos</a></p></li>
<li><p><a class="reference external" href="https://docs.github.com/en/rest/reference/issues">github rest API reference for issues</a></p></li>
</ul>
</div>
<p class="rubric">Functions</p>
<table class="longtable docutils data align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#python_action.run.capture_linters_output" title="python_action.run.capture_linters_output"><code class="xref py py-obj docutils literal notranslate"><span class="pre">capture_linters_output</span></code></a>(diff_only)</p></td>
<td><p>Execute and capture all output from clang-tidy and clang-format.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#python_action.run.filter_out_non_source_files" title="python_action.run.filter_out_non_source_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_out_non_source_files</span></code></a>(ext_list, diff_only)</p></td>
<td><p>Exclude undesired files (specified by user input 'extensions').</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#python_action.run.get_list_of_changed_files" title="python_action.run.get_list_of_changed_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_list_of_changed_files</span></code></a>()</p></td>
<td><p>Fetch the JSON payload of the event's changed files.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#python_action.run.main" title="python_action.run.main"><code class="xref py py-obj docutils literal notranslate"><span class="pre">main</span></code></a>()</p></td>
<td><p>The main script.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#python_action.run.post_results" title="python_action.run.post_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">post_results</span></code></a>()</p></td>
<td><p>Post action's results using REST API.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#python_action.run.set_exit_code" title="python_action.run.set_exit_code"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_exit_code</span></code></a>([override])</p></td>
<td><p>Set the action's exit code.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#python_action.run.verify_files_are_present" title="python_action.run.verify_files_are_present"><code class="xref py py-obj docutils literal notranslate"><span class="pre">verify_files_are_present</span></code></a>()</p></td>
<td><p>Download the files if not present.</p></td>
</tr>
</tbody>
</table>
<dl class="py function objdesc">
<dt class="sig sig-object py sig-wrap" id="python_action.run.set_exit_code">
<em class="property"> </em><span class="sig-prename descclassname"><span class="pre">python_action.run.</span></span><span class="sig-name descname"><span class="pre">set_exit_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="desctype"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span> <span class="o"><span class="pre">=</span></span> <code class="code python default_value docutils literal highlight highlight-python"><span class="kc">None</span></code></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span></span></span><a class="reference internal" href="../_modules/python_action/run.html#set_exit_code"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python_action.run.set_exit_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the action’s exit code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="api-field simple">
<dt><span class="sig-name descname">override</span><span class="p"> : </span><span class="desctype"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></span></span></dt><dd><p>The number to use when overriding the action’s logic.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The exit code that was used. If the <code class="docutils literal notranslate"><span class="pre">override</span></code> parameter was not passed,
then this <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref any docutils literal notranslate"><span class="pre">int</span></code></a> value will describe (like a bool value) if any checks failed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function objdesc">
<dt class="sig sig-object py" id="python_action.run.get_list_of_changed_files">
<em class="property"> </em><span class="sig-prename descclassname"><span class="pre">python_action.run.</span></span><span class="sig-name descname"><span class="pre">get_list_of_changed_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a></span></span></span><a class="reference internal" href="../_modules/python_action/run.html#get_list_of_changed_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python_action.run.get_list_of_changed_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the JSON payload of the event’s changed files. Sets the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">FILES</span></code> attribute.</p>
</dd></dl>

<dl class="py function objdesc">
<dt class="sig sig-object py sig-wrap" id="python_action.run.filter_out_non_source_files">
<em class="property"> </em><span class="sig-prename descclassname"><span class="pre">python_action.run.</span></span><span class="sig-name descname"><span class="pre">filter_out_non_source_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ext_list</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diff_only</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a></span></span></span><a class="reference internal" href="../_modules/python_action/run.html#filter_out_non_source_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python_action.run.filter_out_non_source_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude undesired files (specified by user input ‘extensions’). This filter
applies to the event’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">FILES</span></code> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="api-field simple">
<dt><span class="sig-name descname">ext_list</span><span class="p"> : </span><span class="desctype"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a></span></span></dt><dd><p>A comma-separated <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref any docutils literal notranslate"><span class="pre">str</span></code></a> of extensions that are concerned.</p>
</dd>
<dt><span class="sig-name descname">diff_only</span><span class="p"> : </span><span class="desctype"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span></span></dt><dd><p>A flag that forces focus on only changes in the event’s diff
info.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will exit early when nothing left to do.</p>
</div>
</dd></dl>

<dl class="py function objdesc">
<dt class="sig sig-object py" id="python_action.run.verify_files_are_present">
<em class="property"> </em><span class="sig-prename descclassname"><span class="pre">python_action.run.</span></span><span class="sig-name descname"><span class="pre">verify_files_are_present</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a></span></span></span><a class="reference internal" href="../_modules/python_action/run.html#verify_files_are_present"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python_action.run.verify_files_are_present" title="Permalink to this definition">¶</a></dt>
<dd><p>Download the files if not present.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>This function assumes the working directory is the root of the invoking
repository. If files are not found, then they are downloaded to the working
directory. This may be bad for files with the same name from different folders.</p>
</div>
</dd></dl>

<dl class="py function objdesc">
<dt class="sig sig-object py" id="python_action.run.capture_linters_output">
<em class="property"> </em><span class="sig-prename descclassname"><span class="pre">python_action.run.</span></span><span class="sig-name descname"><span class="pre">capture_linters_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diff_only</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python_action/run.html#capture_linters_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python_action.run.capture_linters_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute and capture all output from clang-tidy and clang-format. This aggregates
results in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">OUTPUT</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="api-field simple">
<dt><span class="sig-name descname">diff_only</span><span class="p"> : </span><span class="desctype"><span class="desctype"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span></span></dt><dd><p>A flag that forces focus on only changes in the event’s diff
info.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function objdesc">
<dt class="sig sig-object py" id="python_action.run.post_results">
<em class="property"> </em><span class="sig-prename descclassname"><span class="pre">python_action.run.</span></span><span class="sig-name descname"><span class="pre">post_results</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python_action/run.html#post_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python_action.run.post_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Post action’s results using REST API.</p>
</dd></dl>

<dl class="py function objdesc">
<dt class="sig sig-object py" id="python_action.run.main">
<em class="property"> </em><span class="sig-prename descclassname"><span class="pre">python_action.run.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/python_action/run.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#python_action.run.main" title="Permalink to this definition">¶</a></dt>
<dd><p>The main script.</p>
</dd></dl>



            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">python_action.run</a><ul>
<li><a class="reference internal" href="#python_action.run.set_exit_code">python_action.run.set_exit_code</a></li>
<li><a class="reference internal" href="#python_action.run.get_list_of_changed_files">python_action.run.get_list_of_changed_files</a></li>
<li><a class="reference internal" href="#python_action.run.filter_out_non_source_files">python_action.run.filter_out_non_source_files</a></li>
<li><a class="reference internal" href="#python_action.run.verify_files_are_present">python_action.run.verify_files_are_present</a></li>
<li><a class="reference internal" href="#python_action.run.capture_linters_output">python_action.run.capture_linters_output</a></li>
<li><a class="reference internal" href="#python_action.run.post_results">python_action.run.post_results</a></li>
<li><a class="reference internal" href="#python_action.run.main">python_action.run.main</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="python_action.parse_pylint.html"
                        title="previous chapter">python_action.parse_pylint</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/python_action/python_action.run.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="python_action.parse_pylint.html" title="python_action.parse_pylint"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">check-python-sources Github Action</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="python_action.html" >python_action</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">python_action.run</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021 Brendan Doherty.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>